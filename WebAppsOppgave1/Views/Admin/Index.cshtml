@{
    ViewBag.Title = "Index administrator";
}
<script src="~/Scripts/jquery-3.2.1.js"></script>
<script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>
<script type="text/javascript">
    $(function () {

        $("#airportButton").click(function () {
            $("#flights").hide();
            $("#bookings").hide();
            $("#users").hide();
            $("#registerAirport").hide();
            $("#deleteAirport").hide();
            $("#editAirport").hide();
            $("#airportConfirmation").html("");
            $("#airports").show();
            GetAllAirports();
        });

        $("#flightButton").click(function () {
            $("#airports").hide();
            $("#bookings").hide();
            $("#users").hide();
            $("#registerFlight").hide();
            $("#deleteFlight").hide();
            $("#editFlight").hide();
            $("#flightConfirmation").html("");
            $("#flights").show();
            PopulateAirportDropDowns();
            GetAllFlights();
        });

        $("#bookingButton").click(function () {
            $("#airports").hide();
            $("#flights").hide();
            $("#users").hide();
            $("#registerBooking").hide();
            $("#deleteBooking").hide();
            $("#editBooking").hide();
            $("#bookingConfirmation").html("");
            $("#bookings").show();
            PopulateUserDropDowns();
            PopulateFlightDropDowns();
            GetAllBookings();
        });

        $("#userButton").click(function () {
            $("#airports").hide();
            $("#flights").hide();
            $("#bookings").hide();
            $("#registerUser").hide();
            $("#deleteUser").hide();
            $("#editUser").hide();
            $("#userConfirmation").html("");
            $("#users").show();
            GetAllUsers();
        });



        $("#filterAirports").click(function () {
            GetAllAirports();
        });

        $("#confirmRegisterAirport").click(function () {
            var regOrEd = "Reg";
            var name = $("#airportNameReg").val();
            if (ValidateAirport(regOrEd, name)) {
                $.ajax({
                    url: '/Admin/registerAirport',
                    type: 'POST',
                    contentType: "application/json:charset=utf-8",
                    data: JSON.stringify({ name: name }),
                    dataType: 'json',
                    success: function (success) {
                        if (success == "ok") {
                            $("#airportConfirmation").html("<p style=\"color:forestgreen\">Registrering gjennomført</p>");
                            ClearAirportRegInput();
                            GetAllAirports();
                        }
                        else {
                            $("#airportConfirmation").html("<p style=\"color:indianred\">Feil ved registrering</p>");
                        }
                    },
                    error: function (x, y, z) {
                        alert(x + '\n' + y + '\n' + z);
                    }
                });
            }
        });

        $("#confirmEditAirport").click(function () {
            var regOrEd = "Ed";
            var id = $("#airportIdEd").val();
            var name = $("#airportNameEd").val();

            if (ValidateAirport(regOrEd, name)) {
                $.ajax({
                    url: '/Admin/editAirport',
                    type: 'POST',
                    contentType: "application/json:charset=utf-8",
                    data: JSON.stringify({ id: id, name: name }),
                    dataType: 'json',
                    success: function (success) {
                        if (success == "ok") {
                            $("#airportConfirmation").html("<p style=\"color:forestgreen\">Endring gjennomført</p>");
                            $("#editAirport").hide();
                            GetAllAirports();
                        }
                        else {
                            $("#airportConfirmation").html("<p style=\"color:indianred\">Feil ved endring</p>");
                        }
                    },
                    error: function (x, y, z) {
                        alert(x + '\n' + y + '\n' + z);
                    }
                });
            }
        });

        $("#confirmDeleteAirport").click(function () {
            var id = $("#airportIdDel").val();

            $.ajax({
                url: '/Admin/deleteAirport',
                type: 'POST',
                contentType: "application/json:charset=utf-8",
                data: JSON.stringify({ id: id }),
                dataType: 'json',
                success: function (success) {
                    if (success == "ok") {
                        $("#airportConfirmation").html("<p style=\"color:forestgreen\">Sletting gjennomført</p>");
                        $("#deleteAirport").hide();
                        GetAllAirports();
                    }
                    else {
                        $("#airportConfirmation").html("<p style=\"color:indianred\">Feil ved sletting</p>");
                    }
                },
                error: function (x, y, z) {
                    alert(x + '\n' + y + '\n' + z);
                }
            });
        });


        
        $("#filterFlights").click(function () {
            GetAllFlights();
        });

        $("#confirmRegisterFlight").click(function () {
            var regOrEd = "Reg";
            var fromAirport = $("#fromAirportReg").val();
            var toAirport = $("#toAirportReg").val();
            var departure = $("#departureReg").val().toString("dd.MM.yyyy HH:mm");
            var arrival = $("#arrivalReg").val().toString("dd.MM.yyyy HH:mm");
            var price = $("#priceReg").val();

            if (ValidateFlight(regOrEd, fromAirport, toAirport, departure, arrival, price)) {
                $.ajax({
                    url: '/Admin/registerFlight',
                    type: 'POST',
                    contentType: "application/json:charset=utf-8",
                    data: JSON.stringify({ fromAirportId: fromAirport, toAirportId: toAirport, departure: departure, arrival: arrival, price: price }),
                    dataType: 'json',
                    success: function (success) {
                        if (success == "ok") {
                            $("#flightConfirmation").html("<p style=\"color:forestgreen\">Registrering gjennomført</p>");
                            ClearFlightRegInput();
                            GetAllFlights();
                        }
                        else {
                            $("#flightConfirmation").html("<p style=\"color:indianred\">Feil ved registrering</p>");
                        }
                    },
                    error: function (x, y, z) {
                        alert(x + '\n' + y + '\n' + z);
                    }
                });
            }
        });

        $("#confirmEditFlight").click(function () {
            var regOrEd = "Ed";
            var id = $("#flightIdEd").val();
            var fromAirport = $("#fromAirportEd").val();
            var toAirport = $("#toAirportEd").val();
            var departure = $("#departureEd").val().toString("dd.MM.yyyy HH:mm");
            var arrival = $("#arrivalEd").val().toString("dd.MM.yyyy HH:mm");
            var price = $("#priceEd").val();

            if (ValidateFlight(regOrEd, fromAirport, toAirport, departure, arrival, price)) {
                $.ajax({
                    url: '/Admin/editFlight',
                    type: 'POST',
                    contentType: "application/json:charset=utf-8",
                    data: JSON.stringify({ id: id, fromAirportId: fromAirport, toAirportId: toAirport, departure: departure, arrival: arrival, price: price }),
                    dataType: 'json',
                    success: function (success) {
                        if (success == "ok") {
                            $("#flightConfirmation").html("<p style=\"color:forestgreen\">Endring gjennomført</p>");
                            $("#editFlight").hide();
                            GetAllFlights();
                        }
                        else {
                            $("#flightConfirmation").html("<p style=\"color:indianred\">Feil ved endring</p>");
                        }
                    },
                    error: function (x, y, z) {
                        alert(x + '\n' + y + '\n' + z);
                    }
                });
            }
        });

        $("#confirmDeleteFlight").click(function () {
            var id = $("#flightIdDel").val();

            $.ajax({
                url: '/Admin/deleteFlight',
                type: 'POST',
                contentType: "application/json:charset=utf-8",
                data: JSON.stringify({ id: id }),
                dataType: 'json',
                success: function (success) {
                    if (success == "ok") {
                        $("#flightConfirmation").html("<p style=\"color:forestgreen\">Sletting gjennomført</p>");
                        $("#deleteFlight").hide();
                        GetAllFlights();
                    }
                    else {
                        $("#flightConfirmation").html("<p style=\"color:indianred\">Feil ved sletting</p>");
                    }
                },
                error: function (x, y, z) {
                    alert(x + '\n' + y + '\n' + z);
                }
            });
        });



        $("#filterBookings").click(function () {
            GetAllBookings();
        });

        $("#confirmRegisterBooking").click(function () {
            var regOrEd = "Reg";
            var userId = $("#userReg").val();
            var flightId = $("#flightReg").val();
            var amount = $("#amountReg").val();

            if (ValidateBooking(regOrEd, userId, flightId, amount)) {
                $.ajax({
                    url: '/Admin/registerBooking',
                    type: 'POST',
                    contentType: "application/json:charset=utf-8",
                    data: JSON.stringify({ userId: userId, flightId: flightId, amount: amount }),
                    dataType: 'json',
                    success: function (success) {
                        if (success == "ok") {
                            $("#bookingConfirmation").html("<p style=\"color:forestgreen\">Registrering gjennomført</p>");
                            ClearBookingRegInput();
                            GetAllBookings();
                        }
                        else {
                            $("#bookingConfirmation").html("<p style=\"color:indianred\">Feil ved registrering</p>");
                        }
                    },
                    error: function (x, y, z) {
                        alert(x + '\n' + y + '\n' + z);
                    }
                });
            }
        });

        $("#confirmEditBooking").click(function () {
            var regOrEd = "Ed";
            var id = $("#bookingIdEd").val();
            var userId = $("#userEd").val();
            var flightId = $("#flightEd").val();
            var amount = $("#amountEd").val();

            if (ValidateBooking(regOrEd, userId, flightId, amount)) {
                $.ajax({
                    url: '/Admin/editBooking',
                    type: 'POST',
                    contentType: "application/json:charset=utf-8",
                    data: JSON.stringify({ id: id, userId: userId, flightId: flightId, amount: amount }),
                    dataType: 'json',
                    success: function (success) {
                        if (success == "ok") {
                            $("#bookingConfirmation").html("<p style=\"color:forestgreen\">Endring gjennomført</p>");
                            $("#editBooking").hide();
                            GetAllBookings();
                        }
                        else {
                            $("#bookingConfirmation").html("<p style=\"color:indianred\">Feil ved endring</p>");
                        }
                    },
                    error: function (x, y, z) {
                        alert(x + '\n' + y + '\n' + z);
                    }
                });
            }
        });

        $("#confirmDeleteBooking").click(function () {
            var id = $("#bookingIdDel").val();

            $.ajax({
                url: '/Admin/deleteBooking',
                type: 'POST',
                contentType: "application/json:charset=utf-8",
                data: JSON.stringify({ id:id }),
                dataType: 'json',
                success: function (success) {
                    if (success == "ok") {
                        $("#bookingConfirmation").html("<p style=\"color:forestgreen\">Sletting gjennomført</p>");
                        $("#deleteBooking").hide();
                        GetAllBookings();
                    }
                    else {
                        $("#bookingConfirmation").html("<p style=\"color:indianred\">Feil ved sletting</p>");
                    }
                },
                error: function (x, y, z) {
                    alert(x + '\n' + y + '\n' + z);
                }
            });
        });



        $("#filterUsers").click(function () {
            GetAllUsers();
        });

        $("#confirmRegisterUser").click(function () {
            var regOrEd = "Reg";
            var fornavn = $("#fornavnReg").val();
            var etternavn = $("#etternavnReg").val();
            var adresse = $("#adresseReg").val();
            var postnummer = $("#postnummerReg").val();
            var poststed = $("#poststedReg").val();
            var epost = $("#epostReg").val();
            var passord = $("#passordReg").val();

            if (ValidateUser(regOrEd, fornavn, etternavn, adresse, postnummer, poststed, epost, passord)) {
                $.ajax({
                    url: '/Admin/registerUser',
                    type: 'POST',
                    contentType: "application/json:charset=utf-8",
                    data: JSON.stringify({ fornavn: fornavn, etternavn: etternavn, adresse: adresse, postnummer: postnummer, poststed: poststed, epost: epost, passord: passord }),
                    dataType: 'json',
                    success: function (success) {
                        if (success == "ok") {
                            $("#userConfirmation").html("<p style=\"color:forestgreen\">Registrering gjennomført</p>");
                            ClearUserRegInput();
                            GetAllUsers();
                        }
                        else {
                            $("#userConfirmation").html("<p style=\"color:indianred\">Feil ved registrering</p>");
                        }
                    },
                    error: function (x, y, z) {
                        alert(x + '\n' + y + '\n' + z);
                    }
                });
            }
        });

        $("#confirmEditUser").click(function () {
            var labelIdentifier = "Ed";
            var id = $("#userIdEd").val();
            var fornavn = $("#fornavnEd").val();
            var etternavn = $("#etternavnEd").val();
            var adresse = $("#adresseEd").val();
            var postnummer = $("#postnummerEd").val();
            var poststed = $("#poststedEd").val();
            var epost = $("#epostEd").val();
            var passord = $("#passordEd").val();

            if (ValidateUser(labelIdentifier, fornavn, etternavn, adresse, postnummer, poststed, epost, passord)) {
                $.ajax({
                    url: '/Admin/editUser',
                    type: 'POST',
                    contentType: "application/json:charset=utf-8",
                    data: JSON.stringify({ id: id, fornavn: fornavn, etternavn: etternavn, adresse: adresse, postnummer: postnummer, poststed: poststed, epost: epost, passord: passord }),
                    dataType: 'json',
                    success: function (success) {
                        if (success == "ok") {
                            $("#userConfirmation").html("<p style=\"color:forestgreen\">Endring gjennomført</p>");
                            $("#editUser").hide();
                            GetAllUsers();
                        }
                        else {
                            $("#userConfirmation").html("<p style=\"color:indianred\">Feil ved endring</p>");
                        }
                    },
                    error: function (x, y, z) {
                        alert(x + '\n' + y + '\n' + z);
                    }
                });
            }
        });

        $("#confirmDeleteUser").click(function () {
            var id = $("#userIdDel").val();

            $.ajax({
                url: '/Admin/deleteUser',
                type: 'POST',
                contentType: "application/json:charset=utf-8",
                data: JSON.stringify({ id: id }),
                dataType: 'json',
                success: function (success) {
                    if (success == "ok") {
                        $("#userConfirmation").html("<p style=\"color:forestgreen\">Sletting gjennomført</p>");
                        $("#deleteUser").hide();
                        GetAllUsers();
                    }
                    else {
                        $("#userConfirmation").html("<p style=\"color:indianred\">Feil ved sletting</p>");
                    }
                },
                error: function (x, y, z) {
                    alert(x + '\n' + y + '\n' + z);
                }
            });
        });
    });



    function GetAllAirports() {
        var name = $("#airportNameFilter").val();

        $.ajax({
            url: '/Admin/getAllAirports',
            type: 'POST',
            contentType: "application/json:charset=utf-8",
            data: JSON.stringify({ name: name }),
            dataType: 'json',
            success: function (jsAirports) {
                DisplayAllAirports(jsAirports);
            },
            error: function (x, y, z) {
                alert(x + '\n' + y + '\n' + z);
            }
        });
    }

    function DisplayAllAirports(jsAirports) {

        var result =
            "<br/>" +
            "<table class=\"table table-striped\">" +
            "<thead>" +
            "<tr>" +
            "<th class=\"col-sm-10\">Navn</th>" +
            "<th class=\"col-sm-2\"><a onclick=\"ShowRegisterAirport()\" class=\"btn btn-primary\">Registrer ny</a></th>" +
            "</tr>" +
            "</thead>";
        for (var a in jsAirports) {
            result +=
                "<tr>" +
                "<td>" + jsAirports[a].name + "</td>" +
                "<td>" +
                    "<a onclick=\"ShowEditAirport(" + jsAirports[a].id + ")\" class=\"btn btn-sm btn-primary\">Endre</a> " +
                    "<a onclick=\"ShowDeleteAirport(" + jsAirports[a].id + ")\" class=\"btn btn-sm btn-primary\">Slett</a>" +
                "</td > " +
                "</tr>";
        }
        result += "</table>";
        $("#airportList").html(result);
    }

    function ShowRegisterAirport() {
        $("#editAirport").hide();
        $("#deleteAirport").hide();
        ClearAirportRegInput();
        HideAirportWarningLabels();
        $("#airportConfirmation").html("");
        $("#registerAirport").show();
    }

    function ShowEditAirport(id) {
        $("#registerAirport").hide();
        $("#deleteAirport").hide();
        HideAirportWarningLabels();
        $("#airportConfirmation").html("");
        $("#editAirport").show();

        $.ajax({
            url: '/Admin/getAirport',
            type: 'POST',
            contentType: "application/json:charset=utf-8",
            data: JSON.stringify({ id: id }),
            dataType: 'json',
            success: function (jsAirport) {
                if (jsAirport != null) {
                    $("#airportIdEd").val(jsAirport.id);
                    $("#airportNameEd").val(jsAirport.name);
                }
                else {
                    $("#registerAirportConfirmation").html("<p style=\"color:indianred\">Fant ikke flyplass i database</p>");
                }
            },
            error: function (x, y, z) {
                alert(x + '\n' + y + '\n' + z);
            }
        });
    }

    function ShowDeleteAirport(id) {
        $("#registerAirport").hide();
        $("#editAirport").hide();
        $("#airportConfirmation").html("");
        $("#deleteAirport").show();

        $.ajax({
            url: '/Admin/getAirport',
            type: 'POST',
            contentType: "application/json:charset=utf-8",
            data: JSON.stringify({ id: id }),
            dataType: 'json',
            success: function (jsAirport) {
                if (jsAirport != null) {
                    $("#airportIdDel").val(jsAirport.id);
                    $("#airportNameDel").val(jsAirport.name);
                }
                else {
                    $("#airportConfirmation").html("<p style=\"color:indianred\">Fant ikke flyplass i database</p>");
                }
            },
            error: function (x, y, z) {
                alert(x + '\n' + y + '\n' + z);
            }
        });
    }
    
    function ValidateAirport(regOrEd, name) {
        HideAirportWarningLabels();
        var valid = true;

        var re = new RegExp("^[A-ZÆØÅÁÄÄÈÉË][A-ZÆØÅÁÄÄÈÉËa-zæøåáäèéë .-]{1,39}$");
        if (!re.test(name)) {
            $("#airportName" + regOrEd + "Lbl").html("Ugyldig navn");
            $("#airportName" + regOrEd + "Lbl").show();
            valid = false;
        }
        return valid;
    }

    function ClearAirportRegInput() {
        $("#airportNameReg").val("");
    }

    function HideAirportWarningLabels() {
        $("#airportNameRegLbl").hide();
        $("#airportNameEdLbl").hide();
    }



    function PopulateAirportDropDowns() {
        $.ajax({
            url: '/Admin/getAllAirports',
            type: 'GET',
            dataType: 'json',
            success: function (jsAirports) {
                var result = "<option selected hidden value=\"\">Velg flyplass</option>";
                var filterResult = "<option selected value=\"\"></option>";
                var loop = "";
                for (var a in jsAirports) {
                    loop += "<option value=\"" + jsAirports[a].id + "\">" + jsAirports[a].name + "</option>";
                }
                result += loop;
                filterResult += loop;
                $("#fromAirportFilter").html(filterResult);
                $("#toAirportFilter").html(filterResult);
                $("#fromAirportReg").html(result);
                $("#toAirportReg").html(result);
                $("#fromAirportEd").html(result);
                $("#toAirportEd").html(result);
            },
            error: function (x, y, z) {
                alert(x + '\n' + y + '\n' + z);
            }
        });
    }

    function GetAllFlights() {
        var from = $("#fromAirportFilter").val();
        var to = $("#toAirportFilter").val();
        var departure = $("#departureFilter").val();

        $.ajax({
            url: '/Admin/getAllFlights',
            type: 'POST',
            contentType: "application/json:charset=utf-8",
            data: JSON.stringify({ from:from, to:to, departure:departure }),
            dataType: 'json',
            success: function (jsFlights) {
                DisplayAllFlights(jsFlights);
            },
            error: function (x, y, z) {
                alert(x + '\n' + y + '\n' + z);
            }
        });
    }

    function getAllFlightsForDropdownFiltering() {
        var name = $("#flightFilterBooking").val();
        var nameEdit = $("#flightFilterBookingEdit").val();
        var departure = $("#departureFilterBooking").val();

        if (name.length == 0) {
            name = nameEdit;
        }

        $.ajax({
            url: '/Admin/getAllFlights',
            type: 'POST',
            contentType: 'application/json:charset=utf-8',
            data: JSON.stringify({ from: name, to: name, departure: departure }),
            dataType: 'json',
            success: function (jsFlights) {
                populateFlightDropDownAfterFiltering(jsFlights);
            },
            error: function (x, y, z) {
                alert(x + '\n' + y + '\n' + z);
            }
        });
    }

    function getAllAirportsForDropdownFilteringFrom() {
        var name = $("#airportFilterFlightsFrom").val();

        $.ajax({
            url: '/Admin/getAllAirports',
            type: 'POST',
            contentType: 'application/json:charset=utf-8',
            data: JSON.stringify({ name: name }),
            dataType: 'json',
            success: function (jsAirports) {
                populateAirportDropDownAfterFilteringFrom(jsAirports);
            },
            error: function (x, y, z) {
                alert(x + '\n' + y + '\n' + z);
            }
        });
    }

    function getAllAirportsForDropdownFilteringTo() {
        var name = $("#airportFilterFlightsTo").val();

        $.ajax({
            url: '/Admin/getAllAirports',
            type: 'POST',
            contentType: 'application/json:charset=utf-8',
            data: JSON.stringify({ name: name }),
            dataType: 'json',
            success: function (jsAirports) {
                populateAirportDropDownAfterFilteringTo(jsAirports);
            },
            error: function (x, y, z) {
                alert(x + '\n' + y + '\n' + z);
            }
        });
    }

    function DisplayAllFlights(jsFlights) {

        var result =
            "<br/>" +
            "<table class=\"table table-striped\">" +
            "<thead>" +
            "<tr>" +
            "<th>Fra</th>" +
            "<th>Til</th>" +
            "<th>Avgang</th>" +
            "<th>Ankomst</th>" +
            "<th>Pris</th>" +
            "<th><a onclick=\"ShowRegisterFlight()\" class=\"btn btn-primary\">Registrer ny</a></th>" +
            "</tr>" +
            "</thead>";
        for (var f in jsFlights) {
            result +=
                "<tr>" +
                "<td>" + jsFlights[f].fromAirportName + "</td>" +
                "<td>" + jsFlights[f].toAirportName + "</td>" +
                "<td>" + jsFlights[f].departure + "</td>" +
                "<td>" + jsFlights[f].arrival + "</td>" +
                "<td>" + jsFlights[f].price + " kr</td>" +
                "<td>" +
                    "<a onclick=\"ShowEditFlight(" + jsFlights[f].id + ")\" class=\"btn btn-sm btn-primary\">Endre</a> " +
                    "<a onclick=\"ShowDeleteFlight(" + jsFlights[f].id + ")\" class=\"btn btn-sm btn-primary\">Slett</a>" +
                "</td > " +
                "</tr>";
        }
        result += "</table>";
        $("#flightList").html(result);
    }

    function ShowRegisterFlight() {
        $("#editFlight").hide();
        $("#deleteFlight").hide();
        ClearFlightRegInput();
        HideFlightWarningLabels();
        $("#flightConfirmation").html("");
        $("#registerFlight").show();
    }

    function ShowEditFlight(id) {
        $("#registerFlight").hide();
        $("#deleteFlight").hide();
        HideFlightWarningLabels();
        $("#flightConfirmation").html("");
        $("#editFlight").show();

        $.ajax({
            url: '/Admin/getFlight',
            type: 'POST',
            contentType: "application/json:charset=utf-8",
            data: JSON.stringify({ id: id }),
            dataType: 'json',
            success: function (jsFlight) {
                if (jsFlight != null) {
                    $("#flightIdEd").val(jsFlight.id);
                    $("#fromAirportEd").val(jsFlight.fromAirportId);
                    $("#toAirportEd").val(jsFlight.toAirportId);
                    $("#departureEd").val(jsFlight.departure);
                    $("#arrivalEd").val(jsFlight.arrival);
                    $("#priceEd").val(jsFlight.price);
                }
                else {
                    $("#editFlightConfirmation").html("<p style=\"color:indianred\">Fant ikke flyvning i database</p>");
                }
            },
            error: function (x, y, z) {
                alert(x + '\n' + y + '\n' + z);
            }
        });
    }

    function ShowDeleteFlight(id) {
        $("#registerFlight").hide();
        $("#editFlight").hide();
        $("#flightConfirmation").html("");
        $("#deleteFlight").show();

        $.ajax({
            url: '/Admin/getFlight',
            type: 'POST',
            contentType: "application/json:charset=utf-8",
            data: JSON.stringify({ id: id }),
            dataType: 'json',
            success: function (jsFlight) {
                if (jsFlight != null) {
                    $("#flightIdDel").val(jsFlight.id);
                    $("#fromAirportDel").val(jsFlight.fromAirportName);
                    $("#toAirportDel").val(jsFlight.toAirportName);
                    $("#departureDel").val(jsFlight.departure);
                    $("#arrivalDel").val(jsFlight.arrival);
                    $("#priceDel").val(jsFlight.price);
                }
                else {
                    $("#deleteFlightConfirmation").html("<p style=\"color:indianred\">Fant ikke flyvning i database</p>");
                }
            },
            error: function (x, y, z) {
                alert(x + '\n' + y + '\n' + z);
            }
        });
    }

    function ValidateFlight(regOrEd, fromAirport, toAirport, departure, arrival, price) {
        HideFlightWarningLabels();
        var valid = true;

        if (fromAirport === "") {
            $("#fromAirport" + regOrEd + "Lbl").html("Velg en flyplass å reise fra");
            $("#fromAirport" + regOrEd + "Lbl").show();
            valid = false;
        }
        if (toAirport === "") {
            $("#toAirport" + regOrEd + "Lbl").html("Velg en flyplass å reise til");
            $("#toAirport" + regOrEd + "Lbl").show();
            valid = false;
        }
 /*       if (!Date.parse(departure)) {

            $("#departure" + regOrEd + "Lbl").html("Avereise må skrives på formatet 25.01.17 18:00");
            $("#departure" + regOrEd + "Lbl").show();
            valid = false;
        }
        else if (Date.parse(departure) < Date.now()) {
            $("#departure" + regOrEd + "Lbl").html("Avreise kan ikke være i fortiden");
            $("#departure" + regOrEd + "Lbl").show();
            valid = false;
        }*/
        if (!parseInt(price)) {
            $("#price" + regOrEd + "Lbl").html("Pris må være et heltall");
            $("#price" + regOrEd + "Lbl").show();
            valid = false;
        }
        else if (parseInt(price) < 0 || parseInt(price) > 20000) {
            $("#price" + regOrEd + "Lbl").html("Pris må være mellom kr 0 og 20 000");
            $("#price" + regOrEd + "Lbl").show();
            valid = false;
        }
        return valid;
    }

    function ClearFlightRegInput() {
        $("#fromAirportReg").val("");
        $("#toAirportReg").val("");
        $("#departureReg").val("");
        $("#arrivalReg").val("");
        $("#priceReg").val("");
    }

    function HideFlightWarningLabels() {
        $("#fromAirportRegLbl").hide();
        $("#toAirportRegLbl").hide();
        $("#departureRegLbl").hide();
        $("#arrivalRegLbl").hide();
        $("#priceRegLbl").hide();
        $("#fromAirportEdLbl").hide();
        $("#toAirportEdLbl").hide();
        $("#departureEdLbl").hide();
        $("#arrivalEdLbl").hide();
        $("#priceEdLbl").hide();
    }




    function PopulateUserDropDowns() {
        $.ajax({
            url: '/Admin/getAllUsers',
            type: 'GET',
            dataType: 'json',
            success: function (jsUsers) {
                var result = "<option selected hidden value=\"\">Velg kunde</option>";
                var filterResult = "<option selected value=\"\"></option>";
                var loop = "";
                for (var u in jsUsers) {
                    loop += "<option value=\"" + jsUsers[u].Id + "\">" +
                        jsUsers[u].Fornavn + " " + jsUsers[u].Etternavn + " (" + jsUsers[u].Id + ") </option>";
                }
                result += loop;
                filterResult += loop;
                $("#userFilter").html(filterResult);
                $("#userReg").html(result);
                $("#userEd").html(result);
            },
            error: function (x, y, z) {
                alert(x + '\n' + y + '\n' + z);
            }
        });
    }

    function PopulateFlightDropDowns() {
        $.ajax({
            url: '/Admin/getAllFlights',
            type: 'GET',
            dataType: 'json',
            success: function (jsFlights) {
                var result = "<option selected hidden value=\"\">Velg flyvning</option>";
                var filterResult = "<option selected value=\"\"></option>";
                loop = "";
                for (var f in jsFlights) {
                    loop += "<option value=\"" + jsFlights[f].id + "\">" +
                        jsFlights[f].fromAirportName + " - " + jsFlights[f].toAirportName + ": " +
                        jsFlights[f].departure + "</option>";
                }
                result += loop;
                filterResult += loop;
                $("#flightFilter").html(filterResult);
                $("#flightReg").html(result);
                $("#flightEd").html(result);
            },
            error: function (x, y, z) {
                alert(x + '\n' + y + '\n' + z);
            }
        });
    }

    function populateFlightDropDownAfterFiltering(jsFlights) {
        loop = "";
        for (var f in jsFlights) {
            loop += "<option value=\"" + jsFlights[f].id + "\">" +
                jsFlights[f].fromAirportName + " - " + jsFlights[f].toAirportName + ": " +
                jsFlights[f].departure + "</option>";
        }
        $("#flightReg").html(loop);
        $("#flightEd").html(loop);
    }

    function populateUserDropDownAfterFiltering(jsUsers) {
        loop = "";
        for (var u in jsUsers) {
            loop += "<option value=\"" + jsUsers[u].Id + "\">" +
                jsUsers[u].Fornavn + " " + jsUsers[u].Etternavn + " (" + jsUsers[u].Id + ") </option>";
        }
        $("#userReg").html(loop);
        $("#userEd").html(loop);
    }

    function populateAirportDropDownAfterFilteringFrom(jsAirports) {
        loop = "";
        for (var a in jsAirports) {
            loop += "<option value=\"" + jsAirports[a].id + "\">" + jsAirports[a].name + "</option>";
        }
        $("#fromAirportReg").html(loop);
    }

    function populateAirportDropDownAfterFilteringTo(jsAirports) {
        loop = "";
        for (var a in jsAirports) {
            loop += "<option value=\"" + jsAirports[a].id + "\">" + jsAirports[a].name + "</option>";
        }
        $("#toAirportReg").html(loop);
    }

    function GetAllBookings() {
        var user = $("#userFilter").val();
        var flight = $("#flightFilter").val();

        $.ajax({
            url: '/Admin/getAllBookings',
            type: 'POST',
            contentType: "application/json:charset=utf-8",
            data: JSON.stringify({ user:user, flight:flight }),
            dataType: 'json',
            success: function (jsBookings) {
                DisplayAllBookings(jsBookings);
            },
            error: function (x, y, z) {
                alert(x + '\n' + y + '\n' + z);
            }
        });
    }

    function DisplayAllBookings(jsBookings) {

        var result =
            "<table class=\"table table-striped\">" +
            "<thead>" +
            "<tr>" +
            "<th>Kunde</th>" +
            "<th>KID</td>" +
            "<th>Fra</th>" +
            "<th>Til</th>" +
            "<th>Avgang</th>" +
            "<th>Antall reisende</th>" +
            "<th><a onclick=\"ShowRegisterBooking()\" class=\"btn btn-primary\">Registrer ny</a></th>" +
            "</tr>" +
            "</thead>";
        for (var b in jsBookings) {
            result +=
                "<tr>" +
                "<td>" + jsBookings[b].UserFirstname + " " + jsBookings[b].UserLastname + "</td>" +
                "<td>" + jsBookings[b].UserId + "</td>" +
                "<td>" + jsBookings[b].FlightFrom + "</td>" +
                "<td>" + jsBookings[b].FlightTo + "</td>" +
                "<td>" + jsBookings[b].FlightDeparture + "</td>" +
                "<td>" + jsBookings[b].Amount + "</td>" +
                "<td>" +
                    "<a onclick=\"ShowEditBooking(" + jsBookings[b].Id + ")\" class=\"btn btn-sm btn-primary\">Endre</a> " +
                    "<a onclick=\"ShowDeleteBooking(" + jsBookings[b].Id + ")\" class=\"btn btn-sm btn-primary\">Slett</a>" +
                "</td > " +
                "</tr>";
        }
        result += "</table>";
        $("#bookingList").html(result);
    }

    function ShowRegisterBooking() {
        $("#editBooking").hide();
        $("#deleteBooking").hide();
        ClearBookingRegInput();
        HideBookingWarningLabels();
        $("#bookingConfirmation").html("");
        $("#registerBooking").show();
    }

    function ShowEditBooking(id) {
        $("#registerBooking").hide();
        $("#deleteBooking").hide();
        HideBookingWarningLabels();
        $("#bookingConfirmation").html("");
        $("#editBooking").show();

        $.ajax({
            url: '/Admin/getBooking',
            type: 'POST',
            contentType: "application/json:charset=utf-8",
            data: JSON.stringify({ id:id }),
            dataType: 'json',
            success: function (jsBooking) {
                if (jsBooking != null) {
                    $("#bookingIdEd").val(jsBooking.Id);
                    $("#userEd").val(jsBooking.UserId);
                    $("#flightEd").val(jsBooking.FlightId);
                    $("#amountEd").val(jsBooking.Amount);
                }
                else {
                    $("#bookingConfirmation").html("<p style=\"color:indianred\">Fant ikke bestilling i database</p>");
                }
            },
            error: function (x, y, z) {
                alert(x + '\n' + y + '\n' + z);
            }
        });
    }

    function ShowDeleteBooking(id) {
        $("#registerBooking").hide();
        $("#editBooking").hide();
        $("#bookingConfirmation").html("");
        $("#deleteBooking").show();

        $.ajax({
            url: '/Admin/getBooking',
            type: 'POST',
            contentType: "application/json:charset=utf-8",
            data: JSON.stringify({ id: id }),
            dataType: 'json',
            success: function (jsBooking) {
                if (jsBooking != null) {
                    $("#bookingIdDel").val(jsBooking.Id);
                    $("#userDel").val(jsBooking.UserFirstname + " " + jsBooking.UserLastname);
                    $("#flightDel").val(jsBooking.FlightFrom + " - " + jsBooking.FlightTo + ": " + jsBooking.FlightDeparture);
                    $("#amountDel").val(jsBooking.Amount);
                }
                else {
                    $("#bookingConfirmation").html("<p style=\"color:indianred\">Fant ikke bestilling i database</p>");
                }
            },
            error: function (x, y, z) {
                alert(x + '\n' + y + '\n' + z);
            }
        });
    }

    function ValidateBooking(regOrEd, userId, flightId, amount) {
        HideBookingWarningLabels();
        var valid = true;

        if (userId === "") {
            $("#user" + regOrEd + "Lbl").html("Velg en kunde");
            $("#user" + regOrEd + "Lbl").show();
            valid = false;
        }
        if (flightId === "") {
            $("#flight" + regOrEd + "Lbl").html("Velg en flyvning");
            $("#flight" + regOrEd + "Lbl").show();
            valid = false;
        }

        if (!parseInt(amount)) {
            $("#amount" + regOrEd + "Lbl").html("Antall må være et heltall fra 1 til 10");
            $("#amount" + regOrEd + "Lbl").show();
            valid = false;
        }
        else if (parseInt(amount) > 10) {
            $("#amount" + regOrEd + "Lbl").html("Du kan ikke bestille flere enn 10 billetter");
            $("#amount" + regOrEd + "Lbl").show();
            valid = false;
        }
        return valid;
    }

    function ClearBookingRegInput() {
        $("#userReg").val("");
        $("#flight").val("");
        $("#amount").val("");
    }

    function HideBookingWarningLabels() {
        $("#userRegLbl").hide();
        $("#flightRegLbl").hide();
        $("#amountRegLbl").hide();
        $("#userEdLbl").hide();
        $("#flightEdLbl").hide();
        $("#amoundEdLbl").hide();
    }



    function GetAllUsers() {
        var etternavn = $("#etternavnFilter").val();
        var postnr = $("#postnrFilter").val();

        $.ajax({
            url: '/Admin/getAllUsers',
            type: 'POST',
            contentType: "application/json:charset=utf-8",
            data: JSON.stringify({ etternavn:etternavn, postnr:postnr }),
            dataType: 'json',
            success: function (jsUsers) {
                DisplayAllUsers(jsUsers);
            },
            error: function (x, y, z) {
                alert(x + '\n' + y + '\n' + z);
            }
        });
    }

    function getAllUsersForDropdownFiltering() {
        var name = $("#userFilterBooking").val();
        var nameEdit = $("#userFilterBookingEdit").val();

        if (name.length == 0) {
            name = nameEdit;
        }

        $.ajax({
            url: '/Admin/getAllUsers',
            type: 'POST',
            contentType: 'application/json:charset=utf-8',
            data: JSON.stringify({ etternavn: name, postnr: ''}),
            dataType: 'json',
            success: function (jsUsers) {
                populateUserDropDownAfterFiltering(jsUsers);
            },
            error: function (x, y, z) {
                alert(x + '\n' + y + '\n' + z);
            }
        });
    }

    function DisplayAllUsers(jsUsers) {

        var result =
            "<table class=\"table table-striped\">" +
            "<thead>" +
            "<tr>" +
            "<th>Fornavn</th>" +
            "<th>Etternavn</th>" +
            "<th>Adresse</th>" +
            "<th>Postnummer</th>" +
            "<th>Poststed</th>" +
            "<th>Epost</th>" +
            "<th>KID</th>" +
            "<th><a onclick=\"ShowRegisterUser()\" class=\"btn btn-primary\">Registrer ny</a></th>" +
            "</tr>" +
            "</thead>";
        for (var u in jsUsers) {
            result +=
                "<tr>" +
                "<td>" + jsUsers[u].Fornavn + "</td>" +
                "<td>" + jsUsers[u].Etternavn + "</td>" +
                "<td>" + jsUsers[u].Adresse + "</td>" +
                "<td>" + jsUsers[u].Postnummer + "</td>" +
                "<td>" + jsUsers[u].Poststed + "</td>" +
                "<td>" + jsUsers[u].Epost + "</td>" +
                "<td>" + jsUsers[u].Id + "</td>" +
                "<td>" +
                    "<a onclick=\"ShowEditUser(" + jsUsers[u].Id + ")\" class=\"btn btn-sm btn-primary\">Endre</a> " +
                    "<a onclick=\"ShowDeleteUser(" + jsUsers[u].Id + ")\" class=\"btn btn-sm btn-primary\">Slett</a>" +
                "</td > " +
                "</tr>";
        }
        result += "</table>";
        $("#userList").html(result);
    }

    function ShowRegisterUser() {
        $("#editUser").hide();
        $("#deleteUser").hide();
        ClearUserRegInput();
        HideUserWarningLabels();
        $("#userConfirmation").html("");
        $("#registerUser").show();
    }

    function ShowEditUser(id) {
        $("#registerUser").hide();
        $("#deleteUser").hide();
        HideUserWarningLabels();
        $("#userConfirmation").html("");
        $("#editUser").show();

        $.ajax({
            url: '/Admin/getUser',
            type: 'POST',
            contentType: "application/json:charset=utf-8",
            data: JSON.stringify({ id:id }),
            dataType: 'json',
            success: function (jsUser) {
                if (jsUser != null) {
                    $("#userIdEd").val(jsUser.Id);
                    $("#fornavnEd").val(jsUser.Fornavn);
                    $("#etternavnEd").val(jsUser.Etternavn);
                    $("#adresseEd").val(jsUser.Adresse);
                    $("#postnummerEd").val(jsUser.Postnummer);
                    $("#poststedEd").val(jsUser.Poststed);
                    $("#epostEd").val(jsUser.Epost);
                }
                else {
                    $("#userConfirmation").html("<p style=\"color:indianred\">Fant ikke kunde i database</p>");
                }
            },
            error: function (x, y, z) {
                alert(x + '\n' + y + '\n' + z);
            }
        });
    }

    function ShowDeleteUser(id) {
        $("#registerUser").hide();
        $("#editUser").hide();
        $("#userConfirmation").html("");
        $("#deleteUser").show();

        $.ajax({
            url: '/Admin/getUser',
            type: 'POST',
            contentType: "application/json:charset=utf-8",
            data: JSON.stringify({ id:id }),
            dataType: 'json',
            success: function (jsUser) {
                if (jsUser != null) {
                    $("#userIdDel").val(jsUser.Id);
                    $("#fornavnDel").val(jsUser.Fornavn);
                    $("#etternavnDel").val(jsUser.Etternavn);
                    $("#adresseDel").val(jsUser.Adresse);
                    $("#postnummerDel").val(jsUser.Postnummer);
                    $("#poststedDel").val(jsUser.Poststed);
                    $("#epostDel").val(jsUser.Epost);
                }
                else {
                    $("#userConfirmation").html("<p style=\"color:indianred\">Fant ikke bruker i database</p>");
                }
            },
            error: function (x, y, z) {
                alert(x + '\n' + y + '\n' + z);
            }
        });
    }

    function ValidateUser(regOrEd, fornavn, etternavn, adresse, postnummer, poststed, epost, passord) {
        HideUserWarningLabels();
        var valid = true;

        var re = new RegExp("^[A-ZÆØÅÁÄÄÈÉËa-zæøåáäèéë .-]{2,40}$");
        if (!re.test(fornavn)) {
            $("#fornavn" + regOrEd + "Lbl").html("Ugyldig navn");
            $("#fornavn" + regOrEd + "Lbl").show();
            valid = false;
        }
        if (!re.test(etternavn)) {
            $("#etternavn" + regOrEd + "Lbl").html("Ugyldig navn");
            $("#etternavn" + regOrEd + "Lbl").show();
            valid = false;
        }
        re = new RegExp("^[A-ZÆØÅÁÄÄÈÉËa-zæøåáäèéë .-]{2,40}[0-9]{0,4}[ A-ZÆØÅÁÄÄÈÉËa-zæøåáäèéë]{0,2}$");
        if (!re.test(adresse)) {
            $("#adresse" + regOrEd + "Lbl").html("Ugyldig adresse");
            $("#adresse" + regOrEd + "Lbl").show();
            valid = false;
        }
        re = new RegExp("^[0-9]{4}$");
        if (!re.test(postnummer) || postnummer == "0000") {
            $("#postnummer" + regOrEd + "Lbl").html("Ugyldig postnummer");
            $("#postnummer" + regOrEd + "Lbl").show();
            valid = false;
        }
        re = new RegExp("^[A-ZÆØÅÁÄÄÈÉË]{1}[a-zæøåáäèéë -]{1,30}$");
        if (!re.test(poststed)) {
            $("#poststed" + regOrEd + "Lbl").html("Ugyldig navn på poststed");
            $("#poststed" + regOrEd + "Lbl").show();
            valid = false;
        }
        re = new RegExp("^[A-ZÆØÅÁÄÄÈÉËa-zæøåáäèéë0-9]{1,30}@@{1}[A-ZÆØÅa-zæøåáäèéë .-]{1,30}.[A-ZÆØÅa-zæøåáäèéë -]{2,30}$");
        if (!re.test(epost)) {
            $("#epost" + regOrEd + "Lbl").html("Ugyldig format på epost-adresse");
            $("#epost" + regOrEd + "Lbl").show();
            valid = false;
        }
        re = new RegExp("^[A-ZÆØÅÁÄÈÉËa-zæøåáäèéë0-9]{8,30}$");
        if (passord.length < 8 || passord.length > 30) {
            $("#passord" + regOrEd + "Lbl").html("Passord må være mellom 8 og 30 tegn");
            $("#passord" + regOrEd + "Lbl").show();
            valid = false;
        }
        else if (!re.test(passord)) {
            $("#passord" + regOrEd + "Lbl").html("Passord må bestå av bokstaver og siffer");
            $("#passord" + regOrEd + "Lbl").show();
            valid = false;
        }
        return valid;
    }

    function ClearUserRegInput() {
        $("#fornavnReg").val("");
        $("#etternavnReg").val("");
        $("#adresseReg").val("");
        $("#postnummerReg").val("");
        $("#poststedReg").val("");
        $("#epostReg").val("");
        $("#passordReg").val("");
    }

    function HideUserWarningLabels() {
        $("#fornavnRegLbl").hide();
        $("#etternavnRegLbl").hide();
        $("#adresseRegLbl").hide();
        $("#postnummerRegLbl").hide();
        $("#poststedRegLbl").hide();
        $("#epostRegLbl").hide();
        $("#passordRegLbl").hide();
        $("#fornavnEdLbl").hide();
        $("#etternavnEdLbl").hide();
        $("#adresseEdbl").hide();
        $("#postnummerEdLbl").hide();
        $("#poststedEdLbl").hide();
        $("#epostEdLbl").hide();
        $("#passordEdLbl").hide();
    }

</script>

<div class="container">
    <div class="page-header">
        <h1>Administrasjon av database</h1>
    </div>
    <div class="jumbotron">
        <div class="row">
            <button id="airportButton" class="btn btn-lg btn-info">Flyplasser</button>
            <button id="flightButton" class="btn btn-lg btn-info">Flyvninger</button>
            <button id="bookingButton" class="btn btn-lg btn-info">Bestillinger</button>
            <button id="userButton" class="btn btn-lg btn-info">Kunder</button>
        </div>
        <div id="airports" style="display:none"><br/>
            <div id="registerAirport">
                <h2>Registrer ny flyplass</h2><br/>
                <div class="input-group">
                    <span class="input-group-addon">Flyplassnavn</span>
                    <span class="label label-warning" id="airportNameRegLbl" style="display:none"></span>
                    <input id="airportNameReg" type="text" class="form-control" />
                </div>
                <button id="confirmRegisterAirport" class="btn btn-success">Registrer flyplass</button>
            </div>
            <div id="editAirport">
                <h2>Endre følgende flyplass:</h2>
                <div class="input-group col-sm-4">
                    <span class="input-group-addon" style="width:30%;">ID</span>
                    <input id="airportIdEd" type="text" class="form-control" readonly />
                </div>
                <div class="input-group col-sm-4">
                    <span class="input-group-addon" style="width:30%;">Navn</span>
                    <span class="label label-warning" id="airportNameEdLbl" style="display:none"></span>
                    <input id="airportNameEd" type="text" class="form-control" />
                </div>
                <button id="confirmEditAirport" class="btn btn-success">Bekreft endring</button>
            </div>
            <div id="deleteAirport">
                <h2>Slett følgende flyplass:</h2>
                <div class="input-group">
                    <span class="input-group-addon">ID</span>
                    <input id="airportIdDel" type="text" class="form-control" readonly />
                </div>
                <div class="input-group">
                    <span class="input-group-addon">Navn</span>
                    <input id="airportNameDel" type="text" class="form-control" readonly />
                </div>
                <button id="confirmDeleteAirport" class="btn btn-danger">Bekreft sletting</button>
            </div>
            <div id="airportConfirmation"></div><br/>
            <h2>Registrerte flyplasser</h2><br/>
            <div class="form-inline">
                <div class="input-group">
                    <span class="input-group-addon">Flyplassnavn</span>
                    <input id="airportNameFilter" type="text" class="form-control" />
                </div>
                <button id="filterAirports" class="btn btn-sm btn-info">Avgrens søk</button>
            </div>
        <br/>
            <div id="airportList"></div>
        </div>

        <div id="flights" style="display:none"><br/>
            <div id="registerFlight">
                <h2>Registrer ny flyvning</h2>

                <div class="input-group col-sm-12">
                    <table class="table">
                        <thead class="">
                            <tr>
                                <th>
                                    Fra
                                </th>
                                <th class="col-sm-1"></th>
                                <th>
                                    Til
                                </th>
                                <th class="col-sm-1"></th>
                                <th>
                                    Avreise
                                </th>
                                <th>
                                    Ankomst
                                </th>
                                <th class="col-sm-1">
                                    Pris
                                </th>
                            </tr>
                        </thead>
                        <tr>
                            <td>
                                <input id="airportFilterFlightsFrom" class="form-control" type="text" placeholder="Søk" />
                            </td>
                            <td>
                                <a class="btn btn-sm btn-primary" onclick="getAllAirportsForDropdownFilteringFrom()">Søk</a>
                            </td>
                            <td>
                                <input id="airportFilterFlightsTo" class="form-control" type="text" placeholder="Søk" />
                            </td>
                            <td>
                                <a class="btn btn-sm btn-primary" onclick="getAllAirportsForDropdownFilteringTo()">Søk</a>
                            </td>
                            <td>
                                <span class="label label-warning" id="departureRegLbl" style="display:none"></span>
                                <input id="departureReg" type="datetime-local" class="form-control" style="width:75%;" />
                            </td>
                            <td>
                                <span class="label label-warning" id="arrivalRegLbl" style="display:none"></span>
                                <input id="arrivalReg" type="datetime-local" class="form-control" style="width:75%;" />
                            </td>
                            <td>

                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span class="label label-warning" id="fromAirportRegLbl" style="display:none"></span>
                                <select id="fromAirportReg" class="form-control"></select>
                            </td>
                            <td></td>
                            <td>
                                <span class="label label-warning" id="toAirportRegLbl" style="display:none"></span>
                                <select id="toAirportReg" class="form-control"></select>
                            </td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>
                                <span class="label label-warning" id="priceRegLbl" style="display:none"></span>
                                <input id="priceReg" type="number" class="form-control" />
                            </td>
                        </tr>
                        </table>
                    <button id="confirmRegisterFlight" class="btn btn-success" >Registrer flyvning</button>
                    </div>
                        <!--
                <div class="input-group col-sm-4">
                    <span class="input-group-addon" style="width:30%;">Fra flyplass</span>

                </div>
                <div class="input-group col-sm-4">
                    <span class="input-group-addon" style="width:30%;">Til flyplass</span>

                </div>
                <div class="input-group col-sm-4">
                    <span class="input-group-addon" style="width:30%;">Avreise</span>

                </div>
                <div class="input-group col-sm-4">
                    <span class="input-group-addon" style="width:30%;">Ankomst</span>

                </div>
                <div class="input-group col-sm-4">
                    <span class="input-group-addon" style="width:30%;">Pris</span>

                </div>
                    -->
                        
                </div>
                <div id="editFlight">
                    <h2>Endre følgende flyvning:</h2>
                    <div class="input-group col-sm-4">
                        <span class="input-group-addon" style="width:30%;">ID</span>
                        <input id="flightIdEd" type="text" class="form-control" readonly" />
                    </div>
                    <div class="input-group col-sm-4">
                        <span class="input-group-addon" style="width:30%;">Fra flyplass</span>
                        <span class="label label-warning" id="fromAirportEdLbl" style="display:none"></span>
                        <select id="fromAirportEd" class="form-control"></select>
                    </div>
                    <div class="input-group col-sm-4">
                        <span class="input-group-addon" style="width:30%;">Til flyplass</span>
                        <span class="label label-warning" id="toAirportEdLbl" style="display:none"></span>
                        <select id="toAirportEd" class="form-control"></select>
                    </div>
                    <div class="input-group col-sm-4">
                        <span class="input-group-addon" style="width:30%;">Avreise</span>
                        <span class="label label-warning" id="departureEdLbl" style="display:none"></span>
                        <input id="departureEd" type="datetime-local" class="form-control" />
                    </div>
                    <div class="input-group col-sm-4">
                        <span class="input-group-addon" style="width:30%;">Ankomst</span>
                        <span class="label label-warning" id="arrivalEdLbl" style="display:none"></span>
                        <input id="arrivalEd" type="datetime" class="form-control" />
                    </div>
                    <div class="input-group col-sm-4">
                        <span class="input-group-addon" style="width:30%;">Pris</span>
                        <span class="label label-warning" id="priceEdLbl" style="display:none"></span>
                        <input id="priceEd" type="number" class="form-control" />
                    </div>
                    <button id="confirmEditFlight" class="btn btn-success">Bekreft endring</button>
                </div>
                <div id="deleteFlight">
                    <h2>Slett følgende flyvning:</h2>
                    <div class="input-group">
                        <span class="input-group-addon">ID</span>
                        <input id="flightIdDel" type="text" class="form-control" readonly />
                    </div>
                    <div class="input-group">
                        <span class="input-group-addon">Fra flyplass</span>
                        <input id="fromAirportDel" type="text" class="form-control" readonly />
                    </div>
                    <div class="input-group">
                        <span class="input-group-addon">Til flyplass</span>
                        <input id="toAirportDel" type="text" class="form-control" readonly />
                    </div>
                    <div class="input-group">
                        <span class="input-group-addon">Avreise</span>
                        <input id="departureDel" type="datetime" class="form-control" readonly />
                    </div>
                    <div class="input-group">
                        <span class="input-group-addon">Ankomst</span>
                        <input id="arrivalDel" type="datetime" class="form-control" readonly />
                    </div>
                    <div class="input-group">
                        <span class="input-group-addon">Pris</span>
                        <input id="priceDel" type="number" class="form-control" readonly />
                    </div>
                    <button id="confirmDeleteFlight" class="btn btn-danger">Bekreft sletting</button>
                </div>
                <div id="flightConfirmation"></div><br />
                <h2>Registrerte flyvninger</h2><br />
                <div class="form-inline">
                    <div class="input-group">
                        <span class="input-group-addon">Fra flyplass</span>
                        <select id="fromAirportFilter" class="form-control"></select>
                    </div>
                    <div class="input-group">
                        <span class="input-group-addon">Til flyplass</span>
                        <select id="toAirportFilter" class="form-control"></select>
                    </div>
                    <div class="input-group">
                        <span class="input-group-addon">Avreisedato</span>
                        <input id="departureFilter" type="datetime" class="form-control" />
                    </div>
                    <button id="filterFlights" class="btn btn-sm btn-info">Avgrens søk</button>
                </div>
                <br />
                <div id="flightList"></div>
            </div>

        <div id="bookings" style="display:none"><br/>
            <div id="registerBooking">
                <h2>Registrer ny bestilling</h2>
                <div class="input-group col-sm-12">
                <table class="table"> 
                    <thead class="">
                        <tr>
                            <th class="col-sm-3">
                                Kunde
                            </th>
                            <th class="col-sm-1"></th>
                            <th class="col-sm-4">
                                Flyvning
                            </th>
                            <th class="col-sm-1"></th>
                            <th class="col-sm-3">
                                Antall reisende
                            </th>
                        </tr>
                    </thead>
                    <tr>
                        <td>
                            <input id="userFilterBooking" class="form-control" type="text" placeholder="Søk på etternavn" />
                        </td>
                        <td>
                            <a class="btn btn-sm btn-primary" onclick="getAllUsersForDropdownFiltering()">Søk</a>
                        </td>
                        <td>
                            <input id="flightFilterBooking" class="form-control" type="text" placeholder="Søk på flyplass"/>
                            <input id="departureFilterBooking" type="date" class="form-control" placeholder="Søk på avgang"/>
                        </td>
                        <td>
                            <a class="btn btn-sm btn-primary" onclick="getAllFlightsForDropdownFiltering()">Søk</a>
                        </td>
                        <td>
                            
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span class="label label-warning" id="userRegLbl" style="display:none"></span>
                            <select id="userReg" class="form-control"></select>
                        </td>
                        <td></td>
                        <td>
                            <span class="label label-warning" id="flightRegLbl" style="display:none"></span>
                            <select id="flightReg" class="form-control"></select>
                        </td>
                        <td></td>
                        <td>
                            <span class="label label-warning" id="amountRegLbl" style="display:none"></span>
                            <input id="amountReg" type="number" class="form-control" placeholder="Skriv antall passasjerer" />
                        </td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td><button id="confirmRegisterBooking" class="btn btn-success">Registrer bestilling</button></td>
                    </tr>
                </table>
                </div>
            </div>
            <div id="editBooking">
                <h2>Endre følgende bestilling:</h2>

                <div class="input-group col-sm-12">
                    <table class="table">
                        <thead class="">
                            <tr>
                                <th class="col-sm-1">
                                    ID
                                </th>
                                <th class="col-sm-2">
                                    Kunde
                                </th>
                                <th class="col-sm-1"></th>
                                <th class="col-sm-4">
                                    Flyvning
                                </th>
                                <th class="col-sm-1"></th>
                                <th class="col-sm-3">
                                    Antall reisende
                                </th>
                            </tr>
                        </thead>
                        <tr>
                            <td>
                                <input id="bookingIdEd" type="text" class="form-control" readonly />
                            </td>
                            <td>
                                <input type="text" id="userFilterBookingEdit" placeholder="Søk på etternavn" />
                            </td>
                            <td>
                                
                                <a class="btn btn-sm btn-primary" onclick="getAllUsersForDropdownFiltering()">Søk</a>
                            </td>
                            <td>
                                <input type="text" id="flightFilterBookingEdit" placeholder="Søk på flyplass" />
                            </td>
                            <td>
                                <a class="btn btn-sm btn-primary" onclick="getAllFlightsForDropdownFiltering()">Søk</a>
                            </td>
                            <td>
  
                            </td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>
                                <span class="label label-warning" id="userEdLbl" style="display:none"></span>
                                <select id="userEd" class="form-control"></select>
                            </td>
                            <td></td>
                            <td>
                                <span class="label label-warning" id="flightEdLbl" style="display:none"></span>
                                <select id="flightEd" class="form-control"></select>
                            </td>
                            <td></td>
                            <td>
                            <span class="label label-warning" id="amountEdLbl" style="display:none"></span>
                            <input id="amountEd" type="number" class="form-control" />
                            </td>

                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>
                                <button id="confirmEditBooking" class="btn btn-success">Bekreft endring</button>
                            </td>
                        </tr>


                        </table>
                        </div>
                        
                </div>
                        
                <div id="deleteBooking">
                    <h2>Slett følgende bestilling:</h2>
                    <div class="input-group">
                        <span class="input-group-addon">ID</span>
                        <input id="bookingIdDel" type="text" class="form-control" readonly />
                    </div>
                    <div class="input-group">
                        <span class="input-group-addon">Kunde</span>
                        <input id="userDel" type="text" class="form-control" readonly />
                    </div>
                    <div class="input-group">
                        <span class="input-group-addon">Flyvning</span>
                        <input id="flightDel" type="text" class="form-control" readonly />
                    </div>
                    <div class="input-group">
                        <span class="input-group-addon">Antall reisende</span>
                        <input id="amountDel" type="number" class="form-control" readonly />
                    </div>
                    <button id="confirmDeleteBooking" class="btn btn-danger">Bekreft sletting</button>
                </div>
                <div id="bookingConfirmation"></div><br />
                <h2>Registrerte bestillinger</h2><br />
                <div class="form-inline">
                    <div class="input-group">
                        <span class="input-group-addon">Kunde</span>
                        <select id="userFilter" class="form-control"></select>
                    </div>
                    <div class="input-group">
                        <span class="input-group-addon">Flyvning</span>
                        <select id="flightFilter" class="form-control"></select>
                    </div>
                    <button id="filterBookings" class="btn btn-sm btn-info">Avgrens søk</button>
                </div>
                <br />
                <div id="bookingList"></div>
            </div>

        <div id="users" style="display:none"><br/>
            <div id="registerUser">
                <h2>Registrer ny kunde</h2>
                <div class="input-group col-sm-4">
                    <span class="input-group-addon" style="width:32%;">Fornavn</span>
                    <span class="label label-warning" id="fornavnRegLbl" style="display:none"></span>
                    <input id="fornavnReg" type="text" class="form-control" />
                </div>
                <div class="input-group col-sm-4">
                    <span class="input-group-addon" style="width:32%;">Etternavn</span>
                    <span class="label label-warning" id="etternavnRegLbl" style="display:none"></span>
                    <input id="etternavnReg" type="text" class="form-control" />
                </div>
                <div class="input-group col-sm-4">
                    <span class="input-group-addon" style="width:32%;">Adresse</span>
                    <span class="label label-warning" id="adresseRegLbl" style="display:none"></span>
                    <input id="adresseReg" type="text" class="form-control" />
                </div>
                <div class="input-group col-sm-4">
                    <span class="input-group-addon" style="width:32%;">Postnummer</span>
                    <span class="label label-warning" id="postnummerRegLbl" style="display:none"></span>
                    <input id="postnummerReg" type="text" class="form-control" />
                </div>
                <div class="input-group col-sm-4">
                    <span class="input-group-addon" style="width:32%;">Poststed</span>
                    <span class="label label-warning" id="poststedRegLbl" style="display:none"></span>
                    <input id="poststedReg" type="text" class="form-control" />
                </div>
                <div class="input-group col-sm-4">
                    <span class="input-group-addon" style="width:32%;">Epost</span>
                    <span class="label label-warning" id="epostRegLbl" style="display:none"></span>
                    <input id="epostReg" type="text" class="form-control" />
                </div>
                <div class="input-group col-sm-4">
                    <span class="input-group-addon" style="width:32%;">Passord</span>
                    <span class="label label-warning" id="passordRegLbl" style="display:none"></span>
                    <input id="passordReg" type="password" class="form-control" />
                </div>
                <button id="confirmRegisterUser" class="btn btn-success">Registrer kunde</button>
            </div>
            <div id="editUser">
                <h2>Endre følgende kunde:</h2>
                <div class="input-group col-sm-4">
                    <span class="input-group-addon" style="width:32%;">ID</span>
                    <input id="userIdEd" type="text" class="form-control" readonly />
                </div>
                <div class="input-group col-sm-4">
                    <span class="input-group-addon" style="width:32%;">Fornavn</span>
                    <span class="label label-warning" id="fornavnEdLbl" style="display:none"></span>
                    <input id="fornavnEd" type="text" class="form-control" />
                </div>
                <div class="input-group col-sm-4">
                    <span class="input-group-addon" style="width:32%;">Etternavn</span>
                    <span class="label label-warning" id="etternavnEdLbl" style="display:none"></span>
                    <input id="etternavnEd" type="text" class="form-control" />
                </div>
                <div class="input-group col-sm-4">
                    <span class="input-group-addon" style="width:32%;">Adresse</span>
                    <span class="label label-warning" id="adresseEdLbl" style="display:none"></span>
                    <input id="adresseEd" type="text" class="form-control" />
                </div>
                <div class="input-group col-sm-4">
                    <span class="input-group-addon" style="width:32%;">Postnummer</span>
                    <span class="label label-warning" id="postnummerEdLbl" style="display:none"></span>
                    <input id="postnummerEd" type="text" class="form-control" />
                </div>
                <div class="input-group col-sm-4">
                    <span class="input-group-addon" style="width:32%;">Poststed</span>
                    <span class="label label-warning" id="poststedEdLbl" style="display:none"></span>
                    <input id="poststedEd" type="text" class="form-control" />
                </div>
                <div class="input-group col-sm-4">
                    <span class="input-group-addon" style="width:32%;">Epost</span>
                    <span class="label label-warning" id="epostEdLbl" style="display:none"></span>
                    <input id="epostEd" type="text" class="form-control" />
                </div>
                <div class="input-group col-sm-4">
                    <span class="input-group-addon" style="width:32%;">Passord</span>
                    <span class="label label-warning" id="passordEdLbl" style="display:none"></span>
                    <input id="passordEd" type="password" class="form-control" />
                </div>
                <button id="confirmEditUser" class="btn btn-success">Bekreft endring</button>
            </div>
            <div id="deleteUser">
                <h2>Slett følgende kunde:</h2>
                <div class="input-group">
                    <span class="input-group-addon">ID</span>
                    <input id="userIdDel" type="text" class="form-control" readonly />
                </div>
                <div class="input-group">
                    <span class="input-group-addon">Fornavn</span>
                    <input id="fornavnDel" type="text" class="form-control" readonly />
                </div>
                <div class="input-group">
                    <span class="input-group-addon">Etternavn</span>
                    <input id="etternavnDel" type="text" class="form-control" readonly />
                </div>
                <div class="input-group">
                    <span class="input-group-addon">Adresse</span>
                    <input id="adresseDel" type="text" class="form-control" readonly />
                </div>
                <div class="input-group">
                    <span class="input-group-addon">Postnummer</span>
                    <input id="postnummerDel" type="text" class="form-control" readonly />
                </div>
                <div class="input-group">
                    <span class="input-group-addon">Poststed</span>
                    <input id="poststedDel" type="text" class="form-control" readonly />
                </div>
                <div class="input-group">
                    <span class="input-group-addon">Epost</span>
                    <input id="epostDel" type="text" class="form-control" readonly />
                </div>
                <button id="confirmDeleteUser" class="btn btn-danger">Bekreft sletting</button>
            </div>
            <div id="userConfirmation"></div><br/>
            <h2>Registrerte kunder</h2><br/>
            <div class="form-inline">
                <div class="input-group">
                    <span class="input-group-addon">Etternavn</span>
                    <input id="etternavnFilter" type="text" class="form-control"/>
                </div>
                <div class="input-group">
                    <span class="input-group-addon">Postnummer</span>
                    <input id="postnrFilter" type="text" class="form-control" />
                </div>
                <button id="filterUsers" class="btn btn-sm btn-info">Avgrens søk</button>
            </div>
            <br/>
            <div id="userList"></div>
        </div>
    </div>
</div>